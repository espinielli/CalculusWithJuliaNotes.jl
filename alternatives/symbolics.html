<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Calculus with Julia - 64&nbsp; Symbolics.jl</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../alternatives/SciML.html" rel="next">
<link href="../alternatives.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../logo.png" alt="">
    <span class="navbar-title">Calculus with Julia</span>
  </a>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">Symbolics.jl</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">Precalculus Concepts</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/calculator.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">From calculator to computer</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/variables.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Variables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/numbers_types.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Number systems</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/logical_expressions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Inequalities, Logical expressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/vectors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/ranges.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ranges and Sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/plotting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">The Graph of a Function</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/transformations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Function manipulations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/inversefunctions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The Inverse of a Function</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/polynomial.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Polynomials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/polynomial_roots.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Roots of a polynomial</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/polynomials_package.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">The Polynomials package</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/rational_functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Rational functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/exp_log_functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Exponential and logarithmic functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/trig_functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Trigonometric functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../precalc/julia_overview.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Overview of Julia commands</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">Limits</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/limits.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Limits</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/limits_extensions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Limits, issues, extensions of the concept</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/continuity.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Continuity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../limits/intermediate_value_theorem.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Implications of continuity</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Derivatives</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/numeric_derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Numeric derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/symbolic_derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Symbolic derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/mean_value_theorem.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">The mean value theorem for differentiable functions.</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/optimization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/first_second_derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">The first and second derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/curve_sketching.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Curve Sketching</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/linearization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Linearization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/newtons_method.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Newton’s method</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/more_zeros.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Derivative-free alternatives to Newton’s method</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/lhospitals_rule.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">L’Hospital’s Rule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/implicit_differentiation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Implicit Differentiation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/related_rates.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Related rates</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../derivatives/taylor_series_polynomials.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Taylor Polynomials and other Approximating Polynomials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Integrals</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/area.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Area under a curve</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/ftc.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Fundamental Theorem or Calculus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/substitution.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Substitution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/integration_by_parts.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Integration By Parts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/partial_fractions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Partial Fractions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/improper_integrals.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Improper Integrals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/mean_value_theorem.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Mean value theorem for integrals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/area_between_curves.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Area between two curves</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/center_of_mass.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Center of Mass</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/volumes_slice.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Volumes by slicing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/arc_length.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Arc length</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integrals/surface_area.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Surface Area</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">ODEs</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/odes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">ODEs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/euler.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">Euler’s method</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/solve.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">The problem-algorithm-solve interface</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../ODEs/differential_equations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">51</span>&nbsp; <span class="chapter-title">The <code>DifferentialEquations</code> suite</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Differential vector calculus</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/polar_coordinates.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">52</span>&nbsp; <span class="chapter-title">Polar Coordinates and Curves</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/vectors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">53</span>&nbsp; <span class="chapter-title">Vectors and matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/vector_valued_functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">54</span>&nbsp; <span class="chapter-title">Vector-valued functions, <span class="math inline">\(f:R \rightarrow R^n\)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/scalar_functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">55</span>&nbsp; <span class="chapter-title">Scalar functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/scalar_functions_applications.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">56</span>&nbsp; <span class="chapter-title">Applications with scalar functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/vector_fields.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">57</span>&nbsp; <span class="chapter-title">Functions <span class="math inline">\(R^n \rightarrow R^m\)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../differentiable_vector_calculus/plots_plotting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">58</span>&nbsp; <span class="chapter-title">2D and 3D plots in Julia with Plots</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Integral vector calculus</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/double_triple_integrals.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">59</span>&nbsp; <span class="chapter-title">Multi-dimensional integrals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/line_integrals.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">60</span>&nbsp; <span class="chapter-title">Line and Surface Integrals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/div_grad_curl.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">61</span>&nbsp; <span class="chapter-title">The Gradient, Divergence, and Curl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/stokes_theorem.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">62</span>&nbsp; <span class="chapter-title">Green’s Theorem, Stokes’ Theorem, and the Divergence Theorem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../integral_vector_calculus/review.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">63</span>&nbsp; <span class="chapter-title">Quick Review of Vector Calculus</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../alternatives.html" class="sidebar-item-text sidebar-link">Alternative packages</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/symbolics.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">Symbolics.jl</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/SciML.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">65</span>&nbsp; <span class="chapter-title">The SciML suite of packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/plotly_plotting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">66</span>&nbsp; <span class="chapter-title">JavaScript based plotting libraries</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../alternatives/makie_plotting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">67</span>&nbsp; <span class="chapter-title">Calculus plots with Makie</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">Appendices</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/getting_started_with_julia.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">68</span>&nbsp; <span class="chapter-title">Getting started with Julia</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/julia_interfaces.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">69</span>&nbsp; <span class="chapter-title">Julia interfaces</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/calculus_with_julia.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">70</span>&nbsp; <span class="chapter-title">The <code>CalculusWithJulia</code> package</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/unicode.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">71</span>&nbsp; <span class="chapter-title">Usages of Unicode symbols</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/quick_notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">72</span>&nbsp; <span class="chapter-title">Quick introduction to Calculus with Julia</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#about" id="toc-about" class="nav-link active" data-scroll-target="#about"> <span class="header-section-number">64.1</span> About</a></li>
  <li><a href="#symbolic-variables" id="toc-symbolic-variables" class="nav-link" data-scroll-target="#symbolic-variables"> <span class="header-section-number">64.2</span> Symbolic variables</a></li>
  <li><a href="#symbolic-expressions" id="toc-symbolic-expressions" class="nav-link" data-scroll-target="#symbolic-expressions"> <span class="header-section-number">64.3</span> Symbolic expressions</a>
  <ul class="collapse">
  <li><a href="#tree-structure-to-expressions" id="toc-tree-structure-to-expressions" class="nav-link" data-scroll-target="#tree-structure-to-expressions"> <span class="header-section-number">64.3.1</span> Tree structure to expressions</a></li>
  </ul></li>
  <li><a href="#expression-manipulation" id="toc-expression-manipulation" class="nav-link" data-scroll-target="#expression-manipulation"> <span class="header-section-number">64.4</span> Expression manipulation</a>
  <ul class="collapse">
  <li><a href="#substitute" id="toc-substitute" class="nav-link" data-scroll-target="#substitute"> <span class="header-section-number">64.4.1</span> Substitute</a></li>
  <li><a href="#simplify" id="toc-simplify" class="nav-link" data-scroll-target="#simplify"> <span class="header-section-number">64.4.2</span> Simplify</a></li>
  <li><a href="#rewriting" id="toc-rewriting" class="nav-link" data-scroll-target="#rewriting"> <span class="header-section-number">64.4.3</span> Rewriting</a></li>
  <li><a href="#creating-functions" id="toc-creating-functions" class="nav-link" data-scroll-target="#creating-functions"> <span class="header-section-number">64.4.4</span> Creating functions</a></li>
  <li><a href="#plotting" id="toc-plotting" class="nav-link" data-scroll-target="#plotting"> <span class="header-section-number">64.4.5</span> Plotting</a></li>
  <li><a href="#polynomial-manipulations" id="toc-polynomial-manipulations" class="nav-link" data-scroll-target="#polynomial-manipulations"> <span class="header-section-number">64.4.6</span> Polynomial manipulations</a></li>
  <li><a href="#vectors-and-matrices" id="toc-vectors-and-matrices" class="nav-link" data-scroll-target="#vectors-and-matrices"> <span class="header-section-number">64.4.7</span> Vectors and matrices</a></li>
  <li><a href="#algebraically-solving-equations" id="toc-algebraically-solving-equations" class="nav-link" data-scroll-target="#algebraically-solving-equations"> <span class="header-section-number">64.4.8</span> Algebraically solving equations</a></li>
  <li><a href="#limits" id="toc-limits" class="nav-link" data-scroll-target="#limits"> <span class="header-section-number">64.4.9</span> Limits</a></li>
  <li><a href="#derivatives" id="toc-derivatives" class="nav-link" data-scroll-target="#derivatives"> <span class="header-section-number">64.4.10</span> Derivatives</a></li>
  <li><a href="#integration" id="toc-integration" class="nav-link" data-scroll-target="#integration"> <span class="header-section-number">64.4.11</span> Integration</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/edit/main/quarto/alternatives/symbolics.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/jverzani/CalculusWithJuliaNotes.jl/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">64</span>&nbsp; <span class="chapter-title">Symbolics.jl</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>There are a few options in <code>Julia</code> for symbolic math, for example, the <code>SymPy</code> package which wraps a Python library. This section describes a collection of native <code>Julia</code> packages providing many features of symbolic math.</p>
<section id="about" class="level2" data-number="64.1">
<h2 data-number="64.1" class="anchored" data-anchor-id="about"><span class="header-section-number">64.1</span> About</h2>
<p>The <code>Symbolics</code> package bills itself as a “fast and modern Computer Algebra System (CAS) for a fast and modern programming language.” This package relies on the <code>SymbolicUtils</code> package and is built upon by the <code>ModelingToolkit</code> package, which we don’t describe here.</p>
<p>We begin by loading the <code>Symbolics</code> package which when loaded re-exports the <code>SymbolicUtils</code> package.</p>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Symbolics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="symbolic-variables" class="level2" data-number="64.2">
<h2 data-number="64.2" class="anchored" data-anchor-id="symbolic-variables"><span class="header-section-number">64.2</span> Symbolic variables</h2>
<p>Symbolic math at its core involves symbolic variables, which essentially defer evaluation until requested. The creation of symbolic variables differs between the two packages discussed here.</p>
<p><code>SymbolicUtils</code> creates variables which carry <code>Julia</code> type information (e.g.&nbsp;<code>Int</code>, <code>Float64</code>, …). This type information carries through operations involving these variables. Symbolic variables can be created with the <code>@syms</code> macro. For example</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@syms</span> x y<span class="op">::</span><span class="dt">Int </span><span class="fu">f</span>(x<span class="op">::</span><span class="dt">Real</span>)<span class="op">::</span><span class="dt">Real</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>(x, y, f)</code></pre>
</div>
</div>
<p>This creates <code>x</code> a symbolic value with symbolic type <code>Number</code>, <code>y</code> a symbolic variable holding integer values, and <code>f</code> a symbolic function of a single real variable outputting a real variable.</p>
<p>The non-exported <code>symtype</code> function reveals the underlying type:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Symbolics.SymbolicUtils</span>: symtype</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">symtype</span>(x), <span class="fu">symtype</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(Number, Int64)</code></pre>
</div>
</div>
<p>For <code>y</code>, the symbolic type being real does not imply the type of <code>y</code> is a subtype of <code>Real</code>:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">isa</span>(y, <span class="dt">Real</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>false</code></pre>
</div>
</div>
<p>We see that the function <code>f</code> when called with <code>y</code> would return a value of (symbolic) type <code>Real</code>:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(y) <span class="op">|&gt;</span> symtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>Real</code></pre>
</div>
</div>
<p>As the symbolic type of <code>x</code> is <code>Number</code> – which is not a subtype of <code>Real</code> – the following will error:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: Tuple{Number} is not a subtype of Tuple{Real}.</code></pre>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>SymPy</code> package also has an <code>@syms</code> macro to create variables. Though their names agree, they do different things. Using both packages together would require qualifying many shared method names. For <code>SymbolicUtils</code>, the <code>@syms</code> macro uses <code>Julia</code> types to parameterize the variables. In <code>SymPy</code> it is possible to specify <em>assumptions</em> on the variables, but that is different and not useful for dispatch without some extra effort.</p>
</div>
</div>
<p>For <code>Symbolics</code>, symbolic variables are created using a wrapper around an underlying <code>SymbolicUtils</code> object. This wrapper, <code>Num</code>, is a subtype of <code>Real</code> (the underlying <code>SymbolicUtils</code> object may have symbolic type <code>Real</code>, but it won’t be a subtype of <code>Real</code>.)</p>
<p>Symbolic values are created with the <code>@variables</code> macro. For example:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y<span class="op">::</span><span class="dt">Int </span>z[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]<span class="op">::</span><span class="dt">Int </span><span class="fu">f</span>(<span class="op">..</span>)<span class="op">::</span><span class="dt">Int</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>4-element Vector{Any}:
 x
 y
  z[1:3]
  f⋆</code></pre>
</div>
</div>
<p>This creates</p>
<ul>
<li>a symbolic value <code>x</code> of <code>symtype</code> <code>Real</code></li>
<li>a symbolic value <code>y</code> of <code>symtype</code> <code>Int</code></li>
<li>a vector of symbolic values each of <code>symtype</code> <code>Int</code></li>
<li>a symbolic function <code>f</code> returning an object of <code>symtype</code> <code>Int</code></li>
</ul>
<p>The symbolic type reflects that of the underlying object behind the <code>Num</code> wrapper:</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x), <span class="fu">symtype</span>(x), <span class="fu">typeof</span>(Symbolics.<span class="fu">value</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>(Num, Real, SymbolicUtils.Sym{Real, Base.ImmutableDict{DataType, Any}})</code></pre>
</div>
</div>
<p>(The <code>value</code> method unwraps the <code>Num</code> wrapper.)</p>
</section>
<section id="symbolic-expressions" class="level2" data-number="64.3">
<h2 data-number="64.3" class="anchored" data-anchor-id="symbolic-expressions"><span class="header-section-number">64.3</span> Symbolic expressions</h2>
<p>Symbolic expressions are built up from symbolic variables through natural <code>Julia</code> idioms. <code>SymbolicUtils</code> privileges a few key operations: <code>Add</code>, <code>Mul</code>, <code>Pow</code>, and <code>Div</code>. For examples:</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@syms</span> x y</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x <span class="op">+</span> y) <span class="co"># `Add`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>SymbolicUtils.Add{Number, Int64, Dict{Any, Number}, Nothing}</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x <span class="op">*</span> y) <span class="co"># `Mul`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>SymbolicUtils.Mul{Number, Int64, Dict{Any, Number}, Nothing}</code></pre>
</div>
</div>
<p>Whereas, applying a function leaves a different type:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">sin</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>SymbolicUtils.Term{Number, Nothing}</code></pre>
</div>
</div>
<p>The <code>Term</code> wrapper just represents the effect of calling a function (in this case <code>sin</code>) on its arguments (in this case <code>x</code>).</p>
<p>This happens in the background with symbolic variables in <code>Symbolics</code>:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">sin</span>(x)), <span class="fu">typeof</span>(Symbolics.<span class="fu">value</span>(<span class="fu">sin</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>(Num, SymbolicUtils.Term{Real, Nothing})</code></pre>
</div>
</div>
<section id="tree-structure-to-expressions" class="level3" data-number="64.3.1">
<h3 data-number="64.3.1" class="anchored" data-anchor-id="tree-structure-to-expressions"><span class="header-section-number">64.3.1</span> Tree structure to expressions</h3>
<p>The <code>TermInterface</code> package is used by <code>SymbolicUtils</code> to explore the tree structure of an expression. The main methods are (cf.&nbsp;<a href="https://symbolicutils.juliasymbolics.org/#expression_interface">SymbolicUtils.jl</a>):</p>
<ul>
<li><code>istree(ex)</code>: <code>true</code> if <code>ex</code> is not a <em>leaf</em> node (like a symbol or numeric literal)</li>
<li><code>operation(ex)</code>: the function being called (if <code>istree</code> returns <code>true</code>)</li>
<li><code>arguments(ex)</code>: the arguments to the function begin called</li>
<li><code>symtype(ex)</code>: the inferred type of the expression</li>
</ul>
<p>In addition, the <code>issym</code> function, to determine if <code>x</code> is of type <code>Sym</code>, is useful to distinguish <em>leaf</em> nodes, as will be illustrated below.</p>
<p>These methods can be used to “walk” the tree:</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@syms</span> x y</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> y</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">operation</span>(ex) <span class="co"># the outer function is `+`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>+ (generic function with 550 methods)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arguments</span>(ex) <span class="co"># `+` is n-ary, in this case with 3 arguments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>3-element Vector{Any}:
 1
  y
  x^2</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ex1 <span class="op">=</span> <span class="fu">arguments</span>(ex)[<span class="fl">3</span>] <span class="co"># terms have been reordered</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">operation</span>(ex1)  <span class="co"># operation for `x^2` is `^`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>^ (generic function with 216 methods)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>a, b <span class="op">=</span> <span class="fu">arguments</span>(ex1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>2-element Vector{Union{Int64, SymbolicUtils.Sym{Number, Nothing}}}:
  x
 2</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">istree</span>(ex1), <span class="fu">istree</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>(true, false)</code></pre>
</div>
</div>
<p>Here <code>a</code> is not a “tree”, as it has no operation or arguments, it is just a variable (the <code>x</code> variable).</p>
<p>The value of <code>symtype</code> is the <em>inferred</em> type of an expression, which may not match the actual type. For example,</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">symtype</span>(x), <span class="fu">symtype</span>(<span class="fu">sin</span>(x)), <span class="fu">symtype</span>(x<span class="op">/</span>x), <span class="fu">symtype</span>(x <span class="op">/</span> x<span class="op">^</span><span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>(Int64, Real, Int64, Int64)</code></pre>
</div>
</div>
<p>The last one, is not likely to be an integer, but that is the inferred type in this case.</p>
<section id="example" class="level5">
<h5 class="anchored" data-anchor-id="example">Example</h5>
<p>As an example, we write a function to find the free symbols in a symbolic expression comprised of <code>SymbolicUtils</code> variables. (The <code>Symbolics.get_variables</code> also does this task.) To find the symbols involves walking the expression tree until a leaf node is found and then adding that to our collection if it matches <code>issym</code>.</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Symbolics.SymbolicUtils</span>: issym</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">free_symbols</span>(ex) <span class="op">=</span> (s<span class="op">=</span><span class="fu">Set</span>(); <span class="fu">free_symbols!</span>(s, ex); s)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">free_symbols!</span>(s, ex)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="fu">istree</span>(ex)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> a <span class="op">∈</span> <span class="fu">arguments</span>(ex)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">free_symbols!</span>(s, a)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">issym</span>(ex) <span class="op">&amp;&amp;</span> <span class="fu">push!</span>(s, ex) <span class="co"># push new symbol onto set</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>free_symbols! (generic function with 1 method)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@syms</span> x y z</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">sin</span>(x <span class="op">+</span> <span class="fl">1</span>)<span class="fu">*cos</span>(z)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">free_symbols</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>Set{Any} with 2 elements:
  x
  z</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="expression-manipulation" class="level2" data-number="64.4">
<h2 data-number="64.4" class="anchored" data-anchor-id="expression-manipulation"><span class="header-section-number">64.4</span> Expression manipulation</h2>
<section id="substitute" class="level3" data-number="64.4.1">
<h3 data-number="64.4.1" class="anchored" data-anchor-id="substitute"><span class="header-section-number">64.4.1</span> Substitute</h3>
<p>The <code>substitute</code> command is used to replace values with other values. For example:</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y z</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> x <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span><span class="op">/</span><span class="fl">2</span> <span class="op">+</span> x<span class="op">^</span><span class="fl">3</span><span class="op">/</span><span class="fl">6</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">substitute</span>(ex, x<span class="op">=&gt;</span><span class="fl">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>8//3</code></pre>
</div>
</div>
<p>This defines a symbolic expression, then substitutes the value <code>1</code> in for <code>x</code>. The <code>Pair</code> notation is useful for a <em>single</em> substitution. When there is more than one substitution, a dictionary is used:</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> x<span class="op">^</span><span class="fl">3</span> <span class="op">+</span> y<span class="op">^</span><span class="fl">3</span> <span class="op">-</span> <span class="fl">2</span>z<span class="op">^</span><span class="fl">3</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substitute</span>(w, <span class="fu">Dict</span>(x<span class="op">=&gt;</span><span class="fl">2</span>, y<span class="op">=&gt;</span><span class="fl">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>35 - 2(z^3)</code></pre>
</div>
</div>
<p>The <code>fold</code> argument can be passed <code>false</code> to inhibit evaluation of values. Compare:</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu">sqrt</span>(x)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substitute</span>(ex, x<span class="op">=&gt;</span><span class="fl">2</span>), <span class="fu">substitute</span>(ex, x<span class="op">=&gt;</span><span class="fl">2</span>, fold<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>(2.414213562373095, 1 + sqrt(2))</code></pre>
</div>
</div>
<p>Or</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">sin</span>(x)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substitute</span>(ex, x<span class="op">=&gt;</span><span class="cn">π</span>), <span class="fu">substitute</span>(ex, x<span class="op">=&gt;</span><span class="cn">π</span>, fold<span class="op">=</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>(1.2246467991473532e-16, sin(π))</code></pre>
</div>
</div>
</section>
<section id="simplify" class="level3" data-number="64.4.2">
<h3 data-number="64.4.2" class="anchored" data-anchor-id="simplify"><span class="header-section-number">64.4.2</span> Simplify</h3>
<p>Algebraic operations with symbolic values can involve an exponentially increasing number of terms. As such, some simplification rules are applied after an operation to reduce the complexity of the computed value.</p>
<p>For example, <code>0+x</code> should simplify to <code>x</code>, as well <code>1*x</code>, <code>x^0</code>, or <code>x^1</code> should each simplify, to some natural answer.</p>
<p><code>SymbolicUtils</code> also <a href="https://symbolicutils.juliasymbolics.org/#simplification">simplifies</a> several other expressions, including:</p>
<ul>
<li><code>-x</code> becomes <code>(-1)*x</code></li>
<li><code>x * x</code> becomes <code>x^2</code> (and <code>x^n</code> if more terms). Meaning this expression is represented as a power, not a product</li>
<li><code>x + x</code> becomes <code>2*x</code> (and <code>n*x</code> if more terms). Similarly, this represented as a product, not a sum.</li>
<li><code>p/q * x</code> becomes <code>(p*x)/q)</code>, similarly <code>p/q * x/y</code> becomes <code>(p*x)/(q*y)</code>. (Division wraps multiplication.)</li>
</ul>
<p>In <code>SymbolicUtils</code>, this <em>rewriting</em> is accomplished by means of <em>rewrite rules</em>. The package makes it easy to apply user-written rewrite rules.</p>
</section>
<section id="rewriting" class="level3" data-number="64.4.3">
<h3 data-number="64.4.3" class="anchored" data-anchor-id="rewriting"><span class="header-section-number">64.4.3</span> Rewriting</h3>
<p>Many algebraic simplifications are done by the <code>simplify</code> command. For example, the basic trigonometric identities are applied:</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">sin</span>(x)<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">cos</span>(x)<span class="op">^</span><span class="fl">2</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>ex, <span class="fu">simplify</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>(cos(x)^2 + sin(x)^2, 1)</code></pre>
</div>
</div>
<p>The <code>simplify</code> function applies a series of rewriting rule until the expression stabilizes. The rewrite rules can be user generated, if desired. For example, the Pythagorean identity of trigonometry, just used, can be implement with this rule:</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="pp">@acrule</span>(<span class="fu">sin</span>(<span class="op">~</span>x)<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="fu">cos</span>(<span class="op">~</span>x)<span class="op">^</span><span class="fl">2</span> <span class="op">=&gt;</span> <span class="fu">one</span>(<span class="op">~</span>x))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">|&gt;</span> Symbolics.value <span class="op">|&gt;</span> r <span class="op">|&gt;</span> Num</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>1</code></pre>
</div>
</div>
<p>The rewrite rule, <code>r</code>, is defined by the <code>@acrule</code> macro. The <code>a</code> is for associative, the <code>c</code> for commutative, assumptions made by the macro. (The <code>c</code> means <code>cos(x)^2 + sin(x)^2</code> will also simplify.) Rewrite rules are called on the underlying <code>SymbolicUtils</code> expression, so we first unwrap, then after re-wrap.</p>
<p>The above expression for <code>r</code> is fairly easy to appreciate. The value <code>~x</code> matches the same variable or expression. So the above rule will also simplify more complicated expressions:</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> y z</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>ex1 <span class="op">=</span> <span class="fu">substitute</span>(ex, x <span class="op">=&gt;</span> <span class="fu">sin</span>(x <span class="op">+</span> y <span class="op">+</span> z))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>ex1 <span class="op">|&gt;</span> Symbolics.value <span class="op">|&gt;</span> r <span class="op">|&gt;</span> Num</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>1</code></pre>
</div>
</div>
<p>Rewrite rules when applied return the rewritten expression, if there is a match, or <code>nothing</code>.</p>
<p>Rules involving two values are also easily created. This one, again, comes from the set of simplifications defined for trigonometry and exponential simplifications:</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="pp">@rule</span>(<span class="fu">exp</span>(<span class="op">~</span>x)<span class="op">^</span>(<span class="op">~</span>y) <span class="op">=&gt;</span> <span class="fu">exp</span>(<span class="op">~</span>x <span class="op">*</span> <span class="op">~</span>y))  <span class="co"># (e^x)^y -&gt; e^(x*y)</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">exp</span>(<span class="op">-</span>x<span class="op">+</span>z)<span class="op">^</span>y</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>ex, ex <span class="op">|&gt;</span> Symbolics.value <span class="op">|&gt;</span> r <span class="op">|&gt;</span> Num</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>(exp(z - x)^y, exp(y*(z - x)))</code></pre>
</div>
</div>
<p>This rule is not commutative or associative, as <code>x^y</code> is not the same as <code>y^x</code> and <code>(x^y)^z</code> is not <code>x^(y^z)</code> in general.</p>
<p>The application of rules can be filtered through qualifying predicates. This artificial example uses <code>iseven</code> which returns <code>true</code> for even numbers. Here we subtract <code>1</code> when a number is not even, and otherwise leave the number alone. We do this with two rules:</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>reven <span class="op">=</span> <span class="pp">@rule</span> <span class="op">~</span>x<span class="op">::</span><span class="dt">iseven </span><span class="op">=&gt;</span> <span class="op">~</span>x</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>rodd <span class="op">=</span> <span class="pp">@rule</span> <span class="op">~</span>x<span class="op">::</span><span class="dt">(!iseven</span>) <span class="op">=&gt;</span> <span class="op">~</span>x <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> SymbolicUtils.<span class="fu">Chain</span>([rodd, reven])</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">r</span>(<span class="fl">2</span>), <span class="fu">r</span>(<span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>(2, 2)</code></pre>
</div>
</div>
<p>The <code>Chain</code> function conveniently allows the sequential application of rewrite rules.</p>
<p>The notation <code>~x</code> is called a “slot variable” in the <a href="https://symbolicutils.juliasymbolics.org/rewrite/">documentation</a> for <code>SymbolicUtils</code>. It matches a single expression. To match more than one expression, a “segment variable”, denoted with two <code>~</code>s is used.</p>
</section>
<section id="creating-functions" class="level3" data-number="64.4.4">
<h3 data-number="64.4.4" class="anchored" data-anchor-id="creating-functions"><span class="header-section-number">64.4.4</span> Creating functions</h3>
<p>By utilizing the tree-like nature of a symbolic expression, a <code>Julia</code> expression can be built from an symbolic expression easily enough. The <code>Symbolics.toexpr</code> function does this:</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">exp</span>(<span class="op">-</span>x <span class="op">+</span> z)<span class="op">^</span>y</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">toexpr</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>:((^)((exp)((+)(z, (*)(-1, x))), y))</code></pre>
</div>
</div>
<p>This output shows an internal representation of the steps for computing the value <code>ex</code> given different inputs. (The number <code>(-1)</code> multiplies <code>x</code>, this is added to <code>z</code> and the result passed to <code>exp</code>. That values is then used as the base for <code>^</code> with exponent <code>y</code>.)</p>
<p>Such <code>Julia</code> expressions are one step away from building <code>Julia</code> functions for evaluating symbolic expressions fast (though with some technical details about “world age” to be reckoned with). The <code>build_function</code> function with the argument <code>expression=Val(false)</code> will compile a <code>Julia</code> function:</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> <span class="fu">build_function</span>(ex, x, y, z; expression<span class="op">=</span><span class="fu">Val</span>(<span class="cn">false</span>))</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">h</span>(<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>54.59815003314424</code></pre>
</div>
</div>
<p>The above is <em>similar</em> to substitution:</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">substitute</span>(ex, <span class="fu">Dict</span>(x<span class="op">=&gt;</span><span class="fl">1</span>, y<span class="op">=&gt;</span><span class="fl">2</span>, z<span class="op">=&gt;</span><span class="fl">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>54.59815003314424</code></pre>
</div>
</div>
<p>However, <code>build_function</code> will be <strong>significantly</strong> more performant, which when many function calls are used – such as with plotting – is a big advantage.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The documentation colorfully says “<code>build_function</code> is kind of like if <code>lambdify</code> (from <code>SymPy</code>) ate its spinach.”</p>
</div>
</div>
<p>The above, through passing <span class="math inline">\(3\)</span> variables after the expression, creates a function of <span class="math inline">\(3\)</span> variables. Functions of a vector of inputs can also be created, just by expressing the variables in that manner:</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>h1 <span class="op">=</span> <span class="fu">build_function</span>(ex, [x, y, z]; expression<span class="op">=</span><span class="fu">Val</span>(<span class="cn">false</span>))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">h1</span>([<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>])  <span class="co"># not h1(1,2,3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>54.59815003314424</code></pre>
</div>
</div>
<section id="example-1" class="level5">
<h5 class="anchored" data-anchor-id="example-1">Example</h5>
<p>As an example, here we use the <code>Roots</code> package to find a zero of a function defined symbolically:</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Roots</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> x<span class="op">^</span><span class="fl">5</span> <span class="op">-</span> x <span class="op">-</span> <span class="fl">1</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>λ <span class="op">=</span> <span class="fu">build_function</span>(ex, x; expression<span class="op">=</span><span class="fu">Val</span>(<span class="cn">false</span>))</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>Roots.<span class="fu">find_zero</span>(λ, (<span class="fl">1</span>, <span class="fl">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>1.1673039782614187</code></pre>
</div>
</div>
</section>
</section>
<section id="plotting" class="level3" data-number="64.4.5">
<h3 data-number="64.4.5" class="anchored" data-anchor-id="plotting"><span class="header-section-number">64.4.5</span> Plotting</h3>
<p>Using <code>Plots</code>, the plotting of symbolic expressions is similar to the plotting of a function, as there is a plot recipe that converts the expression into a function via <code>build_function</code>.</p>
<p>For example,</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x<span class="op">^</span>x<span class="op">^</span>x, <span class="fl">0</span>, <span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<p><img src="symbolics_files/figure-html/cell-36-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>A parametric plot is easily defined:</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">sin</span>(x), <span class="fu">cos</span>(x), <span class="fl">0</span>, <span class="cn">pi</span><span class="op">/</span><span class="fl">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<p><img src="symbolics_files/figure-html/cell-37-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>Expressions to be plotted can represent multivariate functions.</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fl">3</span><span class="fu">*</span>(<span class="fl">1</span><span class="op">-</span>x)<span class="op">^</span><span class="fl">2</span><span class="fu">*exp</span>(<span class="op">-</span>x<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> (y<span class="op">+</span><span class="fl">1</span>)<span class="op">^</span><span class="fl">2</span>) <span class="op">-</span> <span class="fl">10</span>(x<span class="op">/</span><span class="fl">5</span><span class="op">-</span>x<span class="op">^</span><span class="fl">3</span><span class="op">-</span>y<span class="op">^</span><span class="fl">5</span>)<span class="fu">*exp</span>(<span class="op">-</span>x<span class="op">^</span><span class="fl">2</span><span class="op">-</span>y<span class="op">^</span><span class="fl">2</span>) <span class="op">-</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span><span class="fu">*exp</span>(<span class="fu">-</span>(x<span class="op">+</span><span class="fl">1</span>)<span class="op">^</span><span class="fl">2</span><span class="op">-</span>y<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>xs <span class="op">=</span> ys <span class="op">=</span> <span class="fu">range</span>(<span class="op">-</span><span class="fl">5</span>, <span class="fl">5</span>, length<span class="op">=</span><span class="fl">100</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">surface</span>(xs, ys, ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<p><img src="symbolics_files/figure-html/cell-38-output-1.svg" class="img-fluid"></p>
</div>
</div>
<p>The ordering of the variables is determined by <code>Symbolics.get_variables</code>:</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">get_variables</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>2-element Vector{Any}:
 y
 x</code></pre>
</div>
</div>
</section>
<section id="polynomial-manipulations" class="level3" data-number="64.4.6">
<h3 data-number="64.4.6" class="anchored" data-anchor-id="polynomial-manipulations"><span class="header-section-number">64.4.6</span> Polynomial manipulations</h3>
<p>There are some facilities for manipulating polynomial expressions in <code>Symbolics</code>. A polynomial, mathematically, is an expression involving one or more symbols with coefficients from a collection that has, at a minimum, addition and multiplication defined. The basic building blocks of polynomials are <em>monomials</em>, which are comprised of products of powers of the symbols. Mathematically, monomials are often allowed to have a multiplying coefficient and may be just a coefficient (if each symbol is taken to the power <span class="math inline">\(0\)</span>), but here we consider just expressions of the type <span class="math inline">\(x_1^{a_1} \cdot x_2^{a_2} \cdots x_k^{a_k}\)</span> with the <span class="math inline">\(a_i &gt; 0\)</span> as monomials.</p>
<p>With this understanding, then an expression can be broken up into monomials with a possible leading coefficient (possibly <span class="math inline">\(1\)</span>) <em>and</em> terms which are not monomials (such as a constant or a more complicated function of the symbols). This is what is returned by the <code>polynomial_coeffs</code> function.</p>
<p>For example</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> a b c x</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>d, r <span class="op">=</span> <span class="fu">polynomial_coeffs</span>(a<span class="op">*</span>x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> b<span class="op">*</span>x <span class="op">+</span> c, (x,))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>(Dict{Any, Any}(x =&gt; b, x^2 =&gt; a), c)</code></pre>
</div>
</div>
<p>The first term output is dictionary with keys which are the monomials and with values which are the coefficients. The second term, the residual, is all the remaining parts of the expression, in this case just the constant <code>c</code>.</p>
<p>The expression can then be reconstructed through</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">+</span> <span class="fu">sum</span>(v<span class="op">*</span>k <span class="cf">for</span> (k,v) <span class="op">∈</span> d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>c + b*x + a*(x^2)</code></pre>
</div>
</div>
<p>The above has <code>a,b,c</code> as parameters and <code>x</code> as the symbol. This separation is designated by passing the desired polynomial symbols to <code>polynomial_coeff</code> as an iterable. (Above as a <span class="math inline">\(1\)</span>-element tuple.)</p>
<p>More complicated polynomials can be similarly decomposed:</p>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> a b c x y z</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> a<span class="op">*</span>x<span class="op">^</span><span class="fl">2</span><span class="op">*</span>y<span class="op">*</span>z <span class="op">+</span> b<span class="op">*</span>x<span class="op">*</span>y<span class="op">^</span><span class="fl">2</span><span class="op">*</span>z <span class="op">+</span> c<span class="op">*</span>x<span class="op">*</span>y<span class="op">*</span>z<span class="op">^</span><span class="fl">2</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>d, r <span class="op">=</span> <span class="fu">polynomial_coeffs</span>(ex, (x, y, z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>(Dict{Any, Any}(x*z*(y^2) =&gt; b, y*z*(x^2) =&gt; a, x*y*(z^2) =&gt; c), 0)</code></pre>
</div>
</div>
<p>The (sparse) decomposition of the polynomial is returned through <code>d</code>. The same pattern as above can be used to reconstruct the expression. To extract the coefficient for a monomial term, indexing can be used. Of note, is an expression like <code>x^2*y*z</code> could <em>possibly</em> not equal the algebraically equal <code>x*y*z*x</code>, as they are only equal after some simplification, but the keys are in a canonical form, so this is not a concern:</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>d[x<span class="op">*</span>y<span class="op">*</span>z<span class="op">*</span>x], d[z<span class="op">*</span>y<span class="op">*</span>x<span class="op">^</span><span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>(a, a)</code></pre>
</div>
</div>
<p>The residual term will capture any non-polynomial terms:</p>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> <span class="fu">sin</span>(x) <span class="op">-</span> x <span class="op">+</span> x<span class="op">^</span><span class="fl">3</span><span class="op">/</span><span class="fl">6</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>d, r <span class="op">=</span> <span class="fu">polynomial_coeffs</span>(ex, (x,))</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>sin(x)</code></pre>
</div>
</div>
<p>To find the degree of a monomial expression, the <code>degree</code> function is available. Here it is applied to each monomial in <code>d</code>:</p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>[<span class="fu">degree</span>(k) for (k,v) <span class="op">∈</span> d]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>2-element Vector{Int64}:
 1
 3</code></pre>
</div>
</div>
<p>The <code>degree</code> function will also identify the degree of more complicated terms:</p>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">degree</span>(<span class="fl">1</span> <span class="op">+</span> x <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>2</code></pre>
</div>
</div>
<p>Mathematically the degree of the <span class="math inline">\(0\)</span> polynomial may be <span class="math inline">\(-1\)</span> or undefined, but here it is <span class="math inline">\(0\)</span>:</p>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">degree</span>(<span class="fl">0</span>), <span class="fu">degree</span>(<span class="fl">1</span>), <span class="fu">degree</span>(x), <span class="fu">degree</span>(x<span class="op">^</span>a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>(0, 0, 1, a)</code></pre>
</div>
</div>
<p>The coefficients are returned as <em>values</em> of a dictionary, and dictionaries are unsorted. To have a natural map between polynomials of a single symbol in the standard basis and a vector, we could use a pattern like this:</p>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x a0 as[<span class="fl">1</span><span class="op">:</span><span class="fl">10</span>]</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> a0 <span class="op">+</span> <span class="fu">sum</span>(as[i]<span class="op">*</span>x<span class="op">^</span>i <span class="cf">for</span> i <span class="op">∈</span> <span class="fu">eachindex</span>(<span class="fu">collect</span>(as)))</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>d, r <span class="op">=</span> <span class="fu">polynomial_coeffs</span>(p, (x,))</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>Dict{Any, Any} with 10 entries:
  x^8  =&gt; as[8]
  x    =&gt; as[1]
  x^3  =&gt; as[3]
  x^5  =&gt; as[5]
  x^4  =&gt; as[4]
  x^6  =&gt; as[6]
  x^7  =&gt; as[7]
  x^2  =&gt; as[2]
  x^10 =&gt; as[10]
  x^9  =&gt; as[9]</code></pre>
</div>
</div>
<p>To sort the values we can use a pattern like the following:</p>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vcat</span>(r, [d[k] for k <span class="op">∈</span> <span class="fu">sort</span>(<span class="fu">collect</span>(<span class="fu">keys</span>(d)), by<span class="op">=</span>degree)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>11-element Vector{SymbolicUtils.Symbolic{Real}}:
 a0
 as[1]
 as[2]
 as[3]
 as[4]
 as[5]
 as[6]
 as[7]
 as[8]
 as[9]
 as[10]</code></pre>
</div>
</div>
<hr>
<p>Rational expressions can be decomposed into a numerator and denominator using the following idiom, which ensures the outer operation is division (a binary operation):</p>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> (<span class="fl">1</span> <span class="op">+</span> x <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span>) <span class="op">/</span> (<span class="fl">1</span> <span class="op">+</span> x <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> x<span class="op">^</span><span class="fl">3</span>)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">nd</span>(ex)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    ex1 <span class="op">=</span> Symbolics.<span class="fu">value</span>(ex)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    (<span class="fu">operation</span>(ex1) <span class="op">==</span> <span class="op">/</span>) <span class="op">||</span> <span class="cf">return</span> (ex, <span class="fu">one</span>(ex))</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Num</span>.(<span class="fu">arguments</span>(ex1))</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="fu">nd</span>(ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>2-element Vector{Num}:
       1 + x + x^2
 1 + x + x^2 + x^3</code></pre>
</div>
</div>
<p>With this, the study of asymptotic behaviour of a univariate rational expression would involve an investigation like the following:</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>m,n <span class="op">=</span> <span class="fu">degree</span>.(<span class="fu">nd</span>(ex))</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>m <span class="op">&gt;</span> n ? <span class="st">"limit is infinite"</span> <span class="op">:</span> m <span class="op">&lt;</span> n ? <span class="st">"limit is 0"</span> <span class="op">:</span> <span class="st">"limit is a constant"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>"limit is 0"</code></pre>
</div>
</div>
</section>
<section id="vectors-and-matrices" class="level3" data-number="64.4.7">
<h3 data-number="64.4.7" class="anchored" data-anchor-id="vectors-and-matrices"><span class="header-section-number">64.4.7</span> Vectors and matrices</h3>
<p>Symbolic vectors and matrices can be created with a specified size:</p>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> v[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>] M[<span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>] N[<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>3-element Vector{Symbolics.Arr{Num}}:
 v[1:3]
 M[1:2,1:3]
 N[1:3,1:3]</code></pre>
</div>
</div>
<p>Computations, like finding the determinant below, are lazy unless the values are <code>collect</code>ed:</p>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LinearAlgebra</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(N)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>Symbolics._det(N, true)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">det</span>(<span class="fu">collect</span>(N))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>(N[2, 1]*N[3, 2] - N[2, 2]*N[3, 1])*N[1, 3] + (N[2, 2]*N[3, 3] - N[2, 3]*N[3, 2])*N[1, 1] - (N[2, 1]*N[3, 3] - N[2, 3]*N[3, 1])*N[1, 2]</code></pre>
</div>
</div>
<p>Similarly, with <code>norm</code>:</p>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">norm</span>(v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>sqrt(Symbolics._mapreduce(#327, +, v, Colon(), (:init =&gt; false,)))</code></pre>
</div>
</div>
<p>and</p>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">norm</span>(<span class="fu">collect</span>(v))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>sqrt(abs2(v[1]) + abs2(v[2]) + abs2(v[3]))</code></pre>
</div>
</div>
<p>Matrix multiplication is also deferred, but the size compatability of the matrices and vectors is considered early:</p>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>M<span class="op">*</span>N, N<span class="op">*</span>N, M<span class="op">*</span>v</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>((M*N)[1:2,1:3], (N*N)[1:3,1:3], (M*v)[1:2])</code></pre>
</div>
</div>
<p>This errors, as the matrix dimensions are not compatible for multiplication:</p>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>N<span class="op">*</span>M</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: DimensionMismatch("expected axes(M, 1) = 1:3")</code></pre>
</div>
</div>
<p>Similarly, linear solutions can be symbolically specified:</p>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> R[<span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>] b[<span class="fl">1</span><span class="op">:</span><span class="fl">2</span>]</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>R <span class="op">\</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>(R \ b)[1:2]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect</span>(R <span class="op">\</span> b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: could not attach metadata of subexpression R \ b to the scalarized form at idx
└ @ Symbolics /Users/verzani/.julia/packages/Symbolics/4VdEG/src/arrays.jl:636</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>2-element Vector{Num}:
 ((-((-b[1]*R[2, 1]) / R[1, 1] + b[2])*R[1, 2]) / ((-R[1, 2]*R[2, 1]) / R[1, 1] + R[2, 2]) + b[1]) / R[1, 1]
                               ((-b[1]*R[2, 1]) / R[1, 1] + b[2]) / ((-R[1, 2]*R[2, 1]) / R[1, 1] + R[2, 2])</code></pre>
</div>
</div>
</section>
<section id="algebraically-solving-equations" class="level3" data-number="64.4.8">
<h3 data-number="64.4.8" class="anchored" data-anchor-id="algebraically-solving-equations"><span class="header-section-number">64.4.8</span> Algebraically solving equations</h3>
<p>The <code>~</code> operator creates a symbolic equation. For example</p>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>x<span class="op">^</span><span class="fl">5</span> <span class="op">-</span> x <span class="op">~</span> <span class="fl">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>x^5 - x ~ 1</code></pre>
</div>
</div>
<p>or</p>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>eqs <span class="op">=</span> [<span class="fl">5</span>x <span class="op">+</span> <span class="fl">2</span>y, <span class="fl">6</span>x <span class="op">+</span> <span class="fl">3</span>y] <span class="op">.~</span> [<span class="fl">1</span>, <span class="fl">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>2-element Vector{Equation}:
 5x + 2y ~ 1
 6x + 3y ~ 2</code></pre>
</div>
</div>
<p>The <code>Symbolics.solve_for</code> function can solve <em>linear</em> equations. For example,</p>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">solve_for</span>(eqs, [x, y])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>2-element Vector{Float64}:
 -0.3333333333333333
  1.3333333333333333</code></pre>
</div>
</div>
<p>The coefficients can be symbolic. Two examples could be:</p>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> m b x y</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>eq <span class="op">=</span> y <span class="op">~</span> m<span class="op">*</span>x <span class="op">+</span> b</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">solve_for</span>(eq, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>(y - b) / m</code></pre>
</div>
</div>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> a11 a12 a22 x y b1 b2</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>R,X,b <span class="op">=</span> [a11 a12; <span class="fl">0</span> a22], [x; y], [b1, b2]</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>eqs <span class="op">=</span> R<span class="op">*</span>X <span class="op">.~</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>2-element Vector{Equation}:
 a11*x + a12*y ~ b1
 a22*y ~ b2</code></pre>
</div>
</div>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">solve_for</span>(eqs, [x,y])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>2-element Vector{SymbolicUtils.Div{Real, N, D, Nothing} where {N, D}}:
 ((a12*b2) / a22 - b1) / (-a11)
 b2 / a22</code></pre>
</div>
</div>
</section>
<section id="limits" class="level3" data-number="64.4.9">
<h3 data-number="64.4.9" class="anchored" data-anchor-id="limits"><span class="header-section-number">64.4.9</span> Limits</h3>
<p>As of writing, there is no extra functionality provided by <code>Symbolics</code> for computing limits.</p>
</section>
<section id="derivatives" class="level3" data-number="64.4.10">
<h3 data-number="64.4.10" class="anchored" data-anchor-id="derivatives"><span class="header-section-number">64.4.10</span> Derivatives</h3>
<p><code>Symbolics</code> provides the <code>derivative</code> function to compute the derivative of a function with respect to a variable:</p>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> a b c x</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> a<span class="op">*</span>x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> b<span class="op">*</span>x <span class="op">+</span> c</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>yp <span class="op">=</span> Symbolics.<span class="fu">derivative</span>(y, x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>b + 2a*x</code></pre>
</div>
</div>
<p>Or to find a critical point:</p>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">solve_for</span>(yp <span class="op">~</span> <span class="fl">0</span>, x) <span class="co"># linear equation to solve</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>b / (-2a)</code></pre>
</div>
</div>
<p>The derivative computation can also be broken up into an expression indicating the derivative and then a function to apply the derivative rules:</p>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>D <span class="op">=</span> <span class="fu">Differential</span>(x)</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">D</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>Differential(x)(c + b*x + a*(x^2))</code></pre>
</div>
</div>
<p>and then</p>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand_derivatives</span>(<span class="fu">D</span>(y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>b + 2a*x</code></pre>
</div>
</div>
<p>Using <code>Differential</code>, differential equations can be specified. An example was given in <a href="../ODEs/differential_equations.html">ODEs</a>, using <code>ModelingToolkit</code>.</p>
<p>Higher order derivatives can be done through composition:</p>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">D</span>(<span class="fu">D</span>(y)) <span class="op">|&gt;</span> expand_derivatives</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>2a</code></pre>
</div>
</div>
<p>Differentials can also be multiplied to create operators for taking higher-order derivatives:</p>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> (x <span class="op">-</span> y<span class="op">^</span><span class="fl">2</span>)<span class="op">/</span>(x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> y<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>Dx, Dy <span class="op">=</span> <span class="fu">Differential</span>(x), <span class="fu">Differential</span>(y)</span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>Dxx, Dxy, Dyy <span class="op">=</span> Dx<span class="op">*</span>Dx, Dx<span class="op">*</span>Dy, Dy<span class="op">*</span>Dy</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>[<span class="fu">Dxx</span>(ex) <span class="fu">Dxy</span>(ex); <span class="fu">Dxy</span>(ex) <span class="fu">Dyy</span>(ex)] <span class="op">.|&gt;</span> expand_derivatives</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>2×2 Matrix{Num}:
 (2(y^2) - 2x) / ((x^2 + y^2)^2) - 2x*(1 / ((x^2 + y^2)^2)) - 2x*(1 / ((x^2 + y^2)^2) - 2x*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))  …                                                          -2x*((-2y) / ((x^2 + y^2)^2)) - 2y*(1 / ((x^2 + y^2)^2) - 2x*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))
                              -2x*((-2y) / ((x^2 + y^2)^2)) - 2y*(1 / ((x^2 + y^2)^2) - 2x*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))     -2 / (x^2 + y^2) + (2(y^2) - 2x) / ((x^2 + y^2)^2) - 2y*((-2y) / ((x^2 + y^2)^2)) - 2y*((-2y) / ((x^2 + y^2)^2) - 2y*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))</code></pre>
</div>
</div>
<p>In addition to <code>Symbolics.derivative</code> there are also the helper functions, such as <code>hessian</code> which performs the above</p>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">hessian</span>(ex, [x,y])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>2×2 Matrix{Num}:
 (2(y^2) - 2x) / ((x^2 + y^2)^2) - 2x*(1 / ((x^2 + y^2)^2)) - 2x*(1 / ((x^2 + y^2)^2) - 2x*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))  …                                                          -2y*(1 / ((x^2 + y^2)^2)) - 2x*((-2y) / ((x^2 + y^2)^2) - 2y*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))
                              -2y*(1 / ((x^2 + y^2)^2)) - 2x*((-2y) / ((x^2 + y^2)^2) - 2y*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))     -2 / (x^2 + y^2) + (2(y^2) - 2x) / ((x^2 + y^2)^2) - 2y*((-2y) / ((x^2 + y^2)^2)) - 2y*((-2y) / ((x^2 + y^2)^2) - 2y*((x - (y^2)) / ((x^2 + y^2)^4))*(2(x^2) + 2(y^2)))</code></pre>
</div>
</div>
<p>The <code>gradient</code> function is also defined</p>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y z</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>ex <span class="op">=</span> x<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="fl">2</span>x<span class="op">*</span>y <span class="op">+</span> z<span class="op">*</span>y</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">gradient</span>(ex, [x, y, z])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>3-element Vector{Num}:
 2x - 2y
  z - 2x
       y</code></pre>
</div>
</div>
<p>The <code>jacobian</code> function takes an array of expressions:</p>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x y</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>eqs <span class="op">=</span> [ x<span class="op">^</span><span class="fl">2</span> <span class="op">-</span> y<span class="op">^</span><span class="fl">2</span>, <span class="fl">2</span>x<span class="op">*</span>y]</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">jacobian</span>(eqs, [x,y])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>2×2 Matrix{Num}:
 2x  -2y
 2y   2x</code></pre>
</div>
</div>
</section>
<section id="integration" class="level3" data-number="64.4.11">
<h3 data-number="64.4.11" class="anchored" data-anchor-id="integration"><span class="header-section-number">64.4.11</span> Integration</h3>
<p>The <code>SymbolicNumericIntegration</code> package provides a means to integrate <em>univariate</em> expressions through its <code>integrate</code> function.</p>
<p>Symbolic integration can be approached in different ways. SymPy implements part of the Risch algorithm in addition to other algorithms. Rules-based algorithms could also be implemented.</p>
<p>For a trivial example, here is a rule that could be used to integrate a single integral</p>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@syms</span> x <span class="fu">∫</span>(x)</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is_var</span>(x) <span class="op">=</span> (xs <span class="op">=</span> Symbolics.<span class="fu">get_variables</span>(x); <span class="fu">length</span>(xs) <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;&amp;</span> xs[<span class="fl">1</span>] <span class="op">===</span> x)</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="pp">@rule</span> <span class="fu">∫</span>(<span class="op">~</span>x<span class="op">::</span><span class="dt">is_var</span>) <span class="op">=&gt;</span> x<span class="op">^</span><span class="fl">2</span><span class="op">/</span><span class="fl">2</span></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="fu">r</span>(<span class="fu">∫</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>(1//2)*(x^2)</code></pre>
</div>
</div>
<p>The <code>SymbolicNumericIntegration</code> package includes many more predicates for doing rules-based integration, but it primarily approaches the task in a different manner.</p>
<p>If <span class="math inline">\(f(x)\)</span> is to be integrated, a set of <em>candidate</em> answers is generated. The following is <strong>proposed</strong> as an answer: <span class="math inline">\(\sum q_i \Theta_i(x)\)</span>. Differentiating the proposed answer leads to a <em>linear system of equations</em> that can be solved.</p>
<p>The example in the <a href="https://arxiv.org/pdf/2201.12468v2.pdf">paper</a> describing the method is with <span class="math inline">\(f(x) = x \sin(x)\)</span> and the candidate thetas are <span class="math inline">\({x, \sin(x), \cos(x), x\sin(x), x\cos(x)}\)</span> so that the propose answer is:</p>
<p><span class="math display">\[
\int f(x) dx = q_1 x + q_2 \sin(x) + q_3 \cos(x) + q_4 x \sin(x) + q_4 x \cos(x)
\]</span></p>
<p>We differentiate the right hand side:</p>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> q[<span class="fl">1</span><span class="op">:</span><span class="fl">5</span>] x</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>ΣqᵢΘᵢ <span class="op">=</span> <span class="fu">dot</span>(<span class="fu">collect</span>(q), (x, <span class="fu">sin</span>(x), <span class="fu">cos</span>(x), <span class="fu">x*sin</span>(x), <span class="fu">x*cos</span>(x)))</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="fu">simplify</span>(Symbolics.<span class="fu">derivative</span>(ΣqᵢΘᵢ, x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<pre><code>(q[2] + q[5])*cos(x) + sin(x)*q[4] + x*cos(x)*q[4] + q[1] - sin(x)*q[3] - x*sin(x)*q[5]</code></pre>
</div>
</div>
<p>This must match <span class="math inline">\(x\sin(x)\)</span> so we have by equating coefficients of the respective terms:</p>
<p><span class="math display">\[
q_2 + q_5 = 0, \quad q_4 = 0, \quad q_1 = 0, \quad q_3 = 0, \quad q_5 = -1
\]</span></p>
<p>That is <span class="math inline">\(q_2=1\)</span>, <span class="math inline">\(q_5=-1\)</span>, and the other coefficients are <span class="math inline">\(0\)</span>, giving an answer computed with:</p>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="fu">Dict</span>(q[i] <span class="op">=&gt;</span> v <span class="cf">for</span> (i,v) <span class="op">∈</span> <span class="fu">enumerate</span>((<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="op">-</span><span class="fl">1</span>)))</span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substitute</span>(ΣqᵢΘᵢ, d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>sin(x) - x*cos(x)</code></pre>
</div>
</div>
<p>The package provides an algorithm for the creation of candidates and the means to solve when possible. The <code>integrate</code> function is the main entry point. It returns three values: <code>solved</code>, <code>unsolved</code>, and <code>err</code>. The <code>unsolved</code> is the part of the integrand which can not be solved through this package. It is <code>0</code> for a given problem when <code>integrate</code> is successful in identifying an antiderivative, in which case <code>solved</code> is the answer. The value of <code>err</code> is a bound on the numerical error introduced by the algorithm.</p>
<p>To see, we have:</p>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">SymbolicNumericIntegration</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(x <span class="op">*</span> <span class="fu">sin</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>(sin(x) - x*cos(x), 0, 0)</code></pre>
</div>
</div>
<p>The second term is <code>0</code>, as this integrand has an identified antiderivative.</p>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(<span class="fu">exp</span>(x<span class="op">^</span><span class="fl">2</span>) <span class="op">+</span> <span class="fu">sin</span>(x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<pre><code>(-cos(x), exp(x^2), Inf)</code></pre>
</div>
</div>
<p>This returns <code>exp(x^2)</code> for the unsolved part, as this function has no simple antiderivative.</p>
<p>Powers of trig functions have antiderivatives, as can be deduced using integration by parts. When the fifth power is used, there is a numeric aspect to the algorithm that is seen:</p>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>u,v,w <span class="op">=</span> <span class="fu">integrate</span>(<span class="fu">sin</span>(x)<span class="op">^</span><span class="fl">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<pre><code>(-0.5333333334686141(cos(x)^5) - (sin(x)^4)*cos(x) - 1.3333333333333333(cos(x)^3)*(sin(x)^2), 0, 2.10912146938623e-10)</code></pre>
</div>
</div>
<p>The derivative of <code>u</code> matches up to some numeric tolerance:</p>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>Symbolics.<span class="fu">derivative</span>(u, x) <span class="op">-</span> <span class="fu">sin</span>(x)<span class="op">^</span><span class="fl">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<pre><code>6.764042659312963e-10(cos(x)^4)*sin(x)</code></pre>
</div>
</div>
<hr>
<p>The integration of rational functions (ratios of polynomials) can be done algorithmically, provided the underlying factorizations can be identified. The <code>SymbolicNumericIntegration</code> package has a function <code>factor_rational</code> that can identify factorizations.</p>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">SymbolicNumericIntegration</span>: factor_rational</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@variables</span> x</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>u <span class="op">=</span> (<span class="fl">1</span> <span class="op">+</span> x <span class="op">+</span> x<span class="op">^</span><span class="fl">2</span>)<span class="op">/</span> (x<span class="op">^</span><span class="fl">2</span> <span class="op">-</span><span class="fl">2</span>x <span class="op">+</span> <span class="fl">1</span>)</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> <span class="fu">factor_rational</span>(u)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>x*((x - 1)^-2) + (x - 1)^-2 + (x^2)*((x - 1)^-2)</code></pre>
</div>
</div>
<p>The summands in <code>v</code> are each integrable. We can see that <code>v</code> is a reexpression through</p>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">simplify</span>(u <span class="op">-</span> v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>0</code></pre>
</div>
</div>
<p>The algorithm is numeric, not symbolic. This can be seen in these two factorizations:</p>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>u <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fu">expand</span>((x<span class="op">^</span><span class="fl">2</span><span class="op">-</span><span class="fl">1</span>)<span class="fu">*</span>(x<span class="op">-</span><span class="fl">2</span>)<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> <span class="fu">factor_rational</span>(u)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<pre><code>0.5((x - 1)^-1) + 0.3333333333333333((x - 2)^-2) - 0.05555555555555705((1 + x)^-1) - 0.4444444444444444((x - 2)^-1)</code></pre>
</div>
</div>
<p>or</p>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>u <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fu">expand</span>((x<span class="op">^</span><span class="fl">2</span><span class="op">+</span><span class="fl">1</span>)<span class="fu">*</span>(x<span class="op">-</span><span class="fl">2</span>)<span class="op">^</span><span class="fl">2</span>)</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>v <span class="op">=</span> <span class="fu">factor_rational</span>(u)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>0.12000000000000012((1 + x^2)^-1) + 0.2((x - 2)^-2) + 0.15999999999999995x*((1 + x^2)^-1) - 0.1599999999999994((x - 2)^-1)</code></pre>
</div>
</div>
<p>As such, the integrals have numeric differences from their mathematical counterparts:</p>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>a,b,c <span class="op">=</span> <span class="fu">integrate</span>(u)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<pre><code>(0.07999999995936365log(1 + x^2) + 0.1200000001879806atan(x) - 0.15999999338167692log(x - 2) - 0.1x*((x - 2)^-1), 0, 2.327469790901071e-9)</code></pre>
</div>
</div>
<p>We can see a bit of how much through the following, which needs a tolerance set to identify the rational numbers of the mathematical factorization correctly:</p>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>cs <span class="op">=</span> [<span class="fu">first</span>(<span class="fu">arguments</span>(term)) for term <span class="op">∈</span> <span class="fu">arguments</span>(a)] <span class="co"># pick off coefficients</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<pre><code>4-element Vector{Float64}:
  0.07999999995936365
  0.1200000001879806
 -0.15999999338167692
 -0.1</code></pre>
</div>
</div>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rationalize</span>.(cs; tol<span class="op">=</span><span class="fl">1e-8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<pre><code>4-element Vector{Rational{Int64}}:
  2//25
  3//25
 -4//25
 -1//10</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../alternatives.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Alternative packages</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../alternatives/SciML.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">65</span>&nbsp; <span class="chapter-title">The SciML suite of packages</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2022, John Verzani</div>
  </div>
</footer>



</body></html>